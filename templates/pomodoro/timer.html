{% extends "pomodoro/base.html" %}

{% block title %}Temporizador{% endblock %}

{% block content %}
<section class="timer-section">
    <h2>Temporizador de Estudio</h2>

    <div class="timer-box">
        <input type="number" id="minutesInput" placeholder="Minutos" min="1">
        <h1 id="display">25:00</h1>

        <div class="controls">
            <button onclick="startTimer()">Iniciar</button>
            <button onclick="pauseTimer()">Pausar</button>
            <button onclick="resetTimer()">Reiniciar</button>
        </div>
    </div>
</section>

<script>
let timer;
let timeLeft = 25 * 60;
let running = false;

function updateDisplay() {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    document.getElementById("display").textContent =
        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

function startTimer() {
    if (running) return;
    running = true;

    const input = document.getElementById("minutesInput").value;
    if (input) timeLeft = parseInt(input) * 60;

    timer = setInterval(() => {
        if (timeLeft > 0) {
            timeLeft--;
            updateDisplay();
        } else {
            clearInterval(timer);
            running = false;
            alert("Â¡Tiempo terminado! ðŸš€");
        }
    }, 1000);
}

function pauseTimer() {
    clearInterval(timer);
    running = false;
}

function resetTimer() {
    clearInterval(timer);
    running = false;
    timeLeft = 25 * 60;
    updateDisplay();
}

updateDisplay();
</script>
{% endblock %}
